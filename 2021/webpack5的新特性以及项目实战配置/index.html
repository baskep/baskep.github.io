<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  
  
  
  
  <link rel="prev" href="https://xtid.github.io/2021/%E5%89%8D%E7%AB%AF%E7%9A%84%E6%A8%A1%E5%9D%97%E8%A7%84%E8%8C%83%E7%AE%80%E8%BF%B0%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AAumd-loader%E6%96%B9%E6%B3%95/" />
  
  <link rel="canonical" href="https://xtid.github.io/2021/webpack5%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E9%85%8D%E7%BD%AE/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" sizes="32x32" href="/favicon.ico">
  <link rel="icon" sizes="16x16" href="/favicon.ico">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Webpack5çš„æ–°ç‰¹æ€§ä»¥åŠé¡¹ç›®å®æˆ˜é…ç½® | ğŸ‘¨ğŸ»â€ğŸ’»
       
  </title>
  <meta name="title" content="Webpack5çš„æ–°ç‰¹æ€§ä»¥åŠé¡¹ç›®å®æˆ˜é…ç½® | ğŸ‘¨ğŸ»â€ğŸ’»">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/xtid.github.io"
    },
    "articleSection" : "posts",
    "name" : "Webpack5çš„æ–°ç‰¹æ€§ä»¥åŠé¡¹ç›®å®æˆ˜é…ç½®",
    "headline" : "Webpack5çš„æ–°ç‰¹æ€§ä»¥åŠé¡¹ç›®å®æˆ˜é…ç½®",
    "description" : "å‰è¨€ webpack5ä¹Ÿå·²ç»å‘å¸ƒäº†(2021.08)æ¥è¿›ä¸€å¹´äº†ï¼Œä¹‹å‰åˆšå‡ºæ¥çš„æ—¶å€™è¿˜æœ‰äº›å‘ä¹Ÿä¸æ•¢æ€¥ç€å®é™…åº”ç”¨åœ¨é¡¹ç›®ä¸­ï¼Œç°åœ¨å®˜æ–¹çš„bugä¹Ÿä¿®çš„å·®ä¸",
    "inLanguage" : "zh-CN",
    "author" : "",
    "creator" : "",
    "publisher": "",
    "accountablePerson" : "",
    "copyrightHolder" : "",
    "copyrightYear" : "2021",
    "datePublished": "2021-08-03 22:34:03 \x2b0800 CST",
    "dateModified" : "2021-08-03 22:34:03 \x2b0800 CST",
    "url" : "https:\/\/xtid.github.io\/2021\/webpack5%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7%E4%BB%A5%E5%8F%8A%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E9%85%8D%E7%BD%AE\/",
    "wordCount" : "2541",
    "keywords" : [  "ğŸ‘¨ğŸ»â€ğŸ’»"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://xtid.github.io">ğŸ‘¨ğŸ»â€ğŸ’»</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/links/" title="">Links</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://xtid.github.io">ğŸ‘¨ğŸ»â€ğŸ’»</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/links/" title="">Links</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Webpack5çš„æ–°ç‰¹æ€§ä»¥åŠé¡¹ç›®å®æˆ˜é…ç½®</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://xtid.github.io" rel="author"></a> with â™¥ 
                <span class="post-time">
                on <time datetime=2021-08-03 itemprop="datePublished">August 3, 2021</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://xtid.github.io/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"> æ—¥å¸¸å­¦ä¹  </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          

<h3 id="å‰è¨€">å‰è¨€</h3>

<p>webpack5ä¹Ÿå·²ç»å‘å¸ƒäº†(2021.08)æ¥è¿›ä¸€å¹´äº†ï¼Œä¹‹å‰åˆšå‡ºæ¥çš„æ—¶å€™è¿˜æœ‰äº›å‘ä¹Ÿä¸æ•¢æ€¥ç€å®é™…åº”ç”¨åœ¨é¡¹ç›®ä¸­ï¼Œç°åœ¨å®˜æ–¹çš„bugä¹Ÿä¿®çš„å·®ä¸å¤šäº†ï¼Œæˆ‘ä¹Ÿå®é™…åœ¨é¡¹ç›®ä¸­è¿ç”¨äº†ä¸‹ï¼Œæ‰€ä»¥ç°åœ¨åšä¸ªæ€»ç»“</p>

<h3 id="æ–°ç‰¹æ€§">æ–°ç‰¹æ€§</h3>

<h4 id="1-ç”¨æŒä¹…æ€§ç¼“å­˜æ¥æé«˜æ„å»ºæ€§èƒ½">1.ç”¨æŒä¹…æ€§ç¼“å­˜æ¥æé«˜æ„å»ºæ€§èƒ½</h4>

<p>åœ¨webpack4ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡cache-loaderç­‰æ‰‹æ®µæ¥å°†ç¼–è¯‘çš„ç»“æœå†™å…¥åˆ°ç£ç›˜ä¸­ï¼Œç°åœ¨å¯ä»¥ç›´æ¥é€šè¿‡è®¾ç½®å°†ç¼–è¯‘ç»“æœç¼“å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­</p>

<p>typeï¼š<code>string: 'memory' | 'filesystem'</code> ï¼Œå°† <code>cache</code> ç±»å‹è®¾ç½®ä¸ºå†…å­˜æˆ–è€…æ–‡ä»¶ç³»ç»Ÿ</p>

<p>buildDependenciesï¼š<code>object</code>ï¼Œé’ˆå¯¹æ„å»ºçš„é¢å¤–ä»£ç ä¾èµ–çš„æ•°ç»„å¯¹è±¡ã€‚webpack å°†ä½¿ç”¨è¿™äº›é¡¹å’Œæ‰€æœ‰ä¾èµ–é¡¹çš„å“ˆå¸Œå€¼æ¥ä½¿æ–‡ä»¶ç³»ç»Ÿç¼“å­˜å¤±æ•ˆ</p>

<pre><code class="language-javascript">cache: {
  type: 'filesystem', // å°†ç¼“å­˜ç±»å‹è®¾ç½®ä¸ºæ–‡ä»¶ç³»ç»Ÿï¼Œé»˜è®¤ä¸ºmemory
  buildDependencies: {
    config: [__filename], // è¿™æ ·è®¾ç½®åwebpackèƒ½è·å–æœ€æ–°çš„é…ç½®ä»¥åŠä¾èµ–é¡¹æ¥é‡æ–°ç¼“å­˜
  },
},
</code></pre>

<h4 id="2-å¯¹èµ„æºå®ç°äº†å†…éƒ¨æ”¯æŒè€Œä¸éœ€è¦é¢å¤–çš„loader">2.å¯¹èµ„æºå®ç°äº†å†…éƒ¨æ”¯æŒè€Œä¸éœ€è¦é¢å¤–çš„loader</h4>

<p><code>asset/resource</code> å‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¹¶å¯¼å‡º URLã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ file-loader å®ç°ã€‚</p>

<p><code>asset/inline</code> å¯¼å‡ºä¸€ä¸ªèµ„æºçš„ data URIã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ url-loader å®ç°ã€‚</p>

<p><code>asset/source</code> å¯¼å‡ºèµ„æºçš„æºä»£ç ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ raw-loader å®ç°ã€‚</p>

<p><code>asset</code> åœ¨å¯¼å‡ºä¸€ä¸ª data URI å’Œå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹é—´è‡ªåŠ¨é€‰æ‹©ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ url-loaderï¼Œå¹¶ä¸”é…ç½®èµ„æºä½“ç§¯é™åˆ¶å®ç°</p>

<pre><code class="language-javascript">module.export = {
  module: {
    rules: [{
      test: /\.png$/,
      type: &quot;asset/resource&quot;, //å¯¹åº”file-loader
    },
    {
      test: /\.svg$/,
      type: &quot;asset/inline&quot;, //å¯¹åº”url-loader å¤§å°&lt;limt è½¬åŒ–ä¸ºbase64
    },
    {
      test: /\.txt$/,
      type: &quot;asset/source&quot;, //å¯¹åº”raw-loader
    },
    {
      test: /\.gif$/,
      type: &quot;asset&quot;, //è‡ªåŠ¨é€‰æ‹©
      parser: {
        dataUrlCondition: {
          maxSize: 4 * 1024,
        },
      },
    }],
  },
}
</code></pre>

<h4 id="3-ç”¨æ›´å¥½çš„-tree-shaking-å’Œä»£ç ç”Ÿæˆæ¥æ”¹å–„åŒ…å¤§å°">3.ç”¨æ›´å¥½çš„ Tree Shaking å’Œä»£ç ç”Ÿæˆæ¥æ”¹å–„åŒ…å¤§å°</h4>

<p>ç°åœ¨çš„Tree Shaking èƒ½å¤Ÿå®Œå…¨å‰”é™¤æœªä½¿ç”¨çš„ä»£ç ï¼ŒåŒæ ·ä½¿ç”¨ES6æ¨¡å—ï¼Œå¹¶å¼€èµ·production modeï¼›å¹¶ä¸”ç°åœ¨èƒ½å¤„ç†å¯¹ Commonjs çš„ tree shakingï¼Œ<strong>å…è®¸æ¶ˆé™¤æœªä½¿ç”¨çš„CommonJså¯¼å‡ºå¹¶è·Ÿè¸ªrequire()è°ƒç”¨ä¸­å¼•ç”¨çš„å¯¼å‡ºåç§°</strong>ï¼Œåœ¨æ‰“åŒ…å‡ºçš„æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°æœ€ç»ˆçš„ä»£ç ã€‚</p>

<h4 id="4-moduleids-chunkids-content-hash-çš„ä¼˜åŒ–">4.moduleIds &amp; chunkIds &amp; content hash çš„ä¼˜åŒ–</h4>

<p><strong>moduleIds &amp; chunkIdsçš„ä¼˜åŒ–</strong></p>

<p>åœ¨webpack5ä»¥å‰ï¼Œæ²¡æœ‰ä»entryæ‰“åŒ…çš„chunkæ–‡ä»¶ï¼Œéƒ½ä¼šä»¥1ï¼Œ2ï¼Œ3&hellip;çš„æ–‡ä»¶å‘½åæ–¹å¼è¾“å‡ºï¼Œæ–‡ä»¶åç§°åçš„hashå€¼æ˜¯ç”¨chunkhashç”Ÿæˆçš„ã€‚è¿™æ ·ä¼šé€ æˆå½“åˆ é™¤æˆ–è€…æš‚æ—¶ä¸ç”¨1.jsè¿™ä¸ªæ–‡ä»¶åï¼Œé‚£ä¹ˆé‡æ–°æ‰“åŒ…æ—¶2.js-&gt;1.js,3.js-&gt;2.jsï¼Œè¿™æ ·ä¼šé€ æˆåŸæ¥çº¿ä¸Šçš„2.jså’Œ3.jsç¼“å­˜å¤±æ•ˆã€‚</p>

<p>webpack5ä¸ºäº†ç¡®ä¿moduleIdï¼ŒchunkId çš„ç¡®å®šæ€§ï¼Œ å¢åŠ äº†å¦‚ä¸‹é…ç½®ï¼š</p>

<p><code>optimization.moduleIds</code></p>

<table>
<thead>
<tr>
<th align="left">é€‰èå€¼</th>
<th align="center">æè¿°</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><code>natural</code></td>
<td align="center">æŒ‰ä½¿ç”¨é¡ºåºçš„æ•°å­— idã€‚</td>
</tr>

<tr>
<td align="left"><code>named</code></td>
<td align="center">å¯¹è°ƒè¯•æ›´å‹å¥½çš„å¯è¯»çš„ idã€‚</td>
</tr>

<tr>
<td align="left"><code>deterministic</code></td>
<td align="center">è¢«å“ˆå¸Œè½¬åŒ–æˆçš„å°ä½æ•°å€¼æ¨¡å—åã€‚</td>
</tr>

<tr>
<td align="left"><code>size</code></td>
<td align="center">ä¸“æ³¨äºè®©åˆå§‹ä¸‹è½½åŒ…å¤§å°æ›´å°çš„æ•°å­— idã€‚</td>
</tr>
</tbody>
</table>

<p><code>deterministic</code> é€‰é¡¹æœ‰ç›Šäºé•¿æœŸç¼“å­˜ï¼Œä½†å¯¹æ¯”äº <code>hashed</code> æ¥è¯´ï¼Œå®ƒä¼šå¯¼è‡´æ›´å°çš„æ–‡ä»¶ bundlesã€‚æ•°å­—å€¼çš„é•¿åº¦ä¼šè¢«é€‰ä½œç”¨äºå¡«æ»¡æœ€å¤š 80%çš„ id ç©ºé—´ã€‚ å½“ <code>optimization.moduleIds</code> è¢«è®¾ç½®æˆ <code>deterministic</code>ï¼Œé»˜è®¤æœ€å° 3 ä½æ•°å­—ä¼šè¢«ä½¿ç”¨ã€‚deterministicé…ç½®åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹æ˜¯é»˜è®¤å¼€å¯ï¼‰</p>

<pre><code class="language-javascript">optimization.moduleIds = 'deterministic'
optimization.chunkIds = 'deterministic'
</code></pre>

<p>å½“ç„¶åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œå¯ä»¥è®¾ç½®æˆ<code>natural</code>ä»¥ä¿æŒä»¥å‰çš„è€æ¨¡å¼</p>

<p><strong>content hashçš„ä¼˜åŒ–</strong></p>

<p>ä¹‹å‰ä½¿ç”¨content hashçš„æ—¶å€™ï¼Œå½“æ”¹åŠ¨æ–‡ä»¶å†…å®¹çš„æ—¶å€™content hashä¼šé‡æ–°ç”Ÿæˆï¼›è€Œç°åœ¨Webpack 5 å°†ä½¿ç”¨çœŸæ­£çš„æ–‡ä»¶å†…å®¹å“ˆå¸Œå€¼ï¼Œä¹Ÿå°±æ˜¯è¯´å½“è¿›è¡Œäº†ä¿®æ”¹æ³¨é‡Šæˆ–è€…ä¿®æ”¹å˜é‡åç­‰ä»£ç é€»è¾‘æ˜¯æ²¡æœ‰å½±å“çš„æ“ä½œæ—¶ï¼Œæ–‡ä»¶å†…å®¹çš„å˜æ›´ä¸ä¼šå¯¼è‡´ contenthash å˜åŒ–ã€‚</p>

<h4 id="5-æ”¯æŒç”Ÿæˆes6-es2015çš„ä»£ç ">5.æ”¯æŒç”ŸæˆES6/ES2015çš„ä»£ç </h4>

<p>webpack 4 é»˜è®¤åªèƒ½è¾“å‡º ES5 ä»£ç ï¼Œç°åœ¨æ”¯æŒæŒ‡å®šç¯å¢ƒï¼Œç„¶åç”Ÿæˆè¯¥ç¯å¢ƒçš„ä¸€ä¸ªä»£ç </p>

<blockquote>
<p><code>target</code></p>

<p><code>string</code> <code>[string]</code> <code>false</code></p>

<p>å‘ŠçŸ¥ webpack ä¸ºç›®æ ‡(target)æŒ‡å®šä¸€ä¸ªç¯å¢ƒã€‚é»˜è®¤å€¼ä¸º <code>&quot;browserslist&quot;</code>ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ° browserslist çš„é…ç½®ï¼Œåˆ™é»˜è®¤ä¸º <code>&quot;web&quot;</code></p>
</blockquote>

<p>ç„¶åæˆ‘ä»¬è®¾ç½®</p>

<p><code>target: ['web', 'es5']</code></p>

<p>webpack å°†ç”Ÿæˆ web å¹³å°çš„è¿è¡Œæ—¶ä»£ç ï¼Œå¹¶ä¸”åªä½¿ç”¨ ES5 ç›¸å…³çš„ç‰¹æ€§</p>

<h4 id="6-ç§»é™¤äº†-node-js-polyfills">6.ç§»é™¤äº† Node.js Polyfills</h4>

<blockquote>
<p>åœ¨æ—©æœŸï¼Œwebpack çš„ç›®çš„æ˜¯ä¸ºäº†è®©å¤§å¤šæ•°çš„ Node.js æ¨¡å—è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œä½†å¦‚ä»Šæ¨¡å—çš„æ ¼å±€å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œç°åœ¨è®¸å¤šæ¨¡å—ä¸»è¦æ˜¯ä¸ºå‰ç«¯è€Œç¼–å†™ã€‚webpack &lt;= 4 çš„ç‰ˆæœ¬ä¸­æä¾›äº†è®¸å¤š Node.js æ ¸å¿ƒæ¨¡å—çš„ polyfillsï¼Œä¸€æ—¦æŸä¸ªæ¨¡å—å¼•ç”¨äº†ä»»ä½•ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼ˆå¦‚ <code>cypto</code> æ¨¡å—ï¼‰ï¼Œwebpack å°±ä¼šè‡ªåŠ¨å¼•ç”¨è¿™äº› polyfillsã€‚</p>

<p>å°½ç®¡è¿™ä¼šä½¿å¾—ä½¿ç”¨ä¸º Node.js ç¼–å†™æ¨¡å—å˜å¾—å®¹æ˜“ï¼Œä½†å®ƒåœ¨æ„å»ºæ—¶ç»™ bundle é™„åŠ äº†åºå¤§çš„ polyfillsã€‚åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿™äº› polyfills å¹¶éå¿…é¡»ã€‚</p>

<p>ä» webpack 5 å¼€å§‹ä¸å†è‡ªåŠ¨å¡«å……è¿™äº› polyfillsï¼Œè€Œä¼šä¸“æ³¨äºå‰ç«¯æ¨¡å—å…¼å®¹ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æé«˜ web å¹³å°çš„å…¼å®¹æ€§ã€‚</p>

<p><strong>è¿ç§»</strong>ï¼š</p>

<ul>
<li>å°½é‡ä½¿ç”¨å‰ç«¯å…¼å®¹çš„æ¨¡å—ã€‚</li>
<li>å¯ä»¥æ‰‹åŠ¨ä¸º Node.js æ ¸å¿ƒæ¨¡å—æ·»åŠ  polyfillã€‚é”™è¯¯æç¤ºä¼šå‘Šè¯‰ä½ å¦‚ä½•å®ç°ã€‚</li>
<li>Package ä½œè€…ï¼šåœ¨ <code>package.json</code> ä¸­æ·»åŠ  <code>browser</code> å­—æ®µï¼Œä½¿ package ä¸å‰ç«¯å…¼å®¹ã€‚ä¸ºæµè§ˆå™¨æä¾›å…¶ä»–çš„å®ç°/dependenciesã€‚</li>
</ul>
</blockquote>

<h4 id="7-module-federation">7.Module Federation</h4>

<blockquote>
<p>å¤šä¸ªç‹¬ç«‹çš„æ„å»ºå¯ä»¥ç»„æˆä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œè¿™äº›ç‹¬ç«‹çš„æ„å»ºä¹‹é—´ä¸åº”è¯¥å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå› æ­¤å¯ä»¥å•ç‹¬å¼€å‘å’Œéƒ¨&gt;ç½²å®ƒä»¬ã€‚</p>

<p>è¿™é€šå¸¸è¢«ç§°ä½œå¾®å‰ç«¯ï¼Œä½†å¹¶ä¸ä»…é™äºæ­¤ã€‚</p>
</blockquote>

<p>ç®€å•æ¥è¯´å°±æ˜¯å…è®¸ä¸€ä¸ªåº”ç”¨ä¸­åŠ¨æ€åœ°å»åŠ è½½å’Œå¼•å…¥å¦ä¸€ä¸ªåº”ç”¨çš„ä»£ç ï¼Œå°±å¥½åƒæœ¬åœ°èµ·ä¸€ä¸ªåº”ç”¨ä½œCDNåº“ï¼Œå…¶å®ƒåœ°æ–¹å»å¼•ç”¨ï¼Œå…·ä½“å¯ä»¥çœ‹<a href="https://webpack.docschina.org/concepts/module-federation/" rel="nofollow noreferrer" target="_blank">å®˜æ–¹é…ç½®</a>ï¼Œä¸ªäººæ„Ÿè§‰å¹¶ä¸æ˜¯ç‰¹åˆ«çš„å®ç”¨</p>

<h3 id="é¡¹ç›®å®æˆ˜">é¡¹ç›®å®æˆ˜</h3>

<p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªwebpack.config.base.jsï¼Œå³å¼€å‘ç¯å¢ƒä»¥åŠç”Ÿäº§ç¯å¢ƒéƒ½éœ€è¦çš„é…ç½®</p>

<pre><code class="language-javascript">const path = require('path')
const { CleanWebpackPlugin } = require('clean-webpack-plugin')
const HtmlWebpackPlugin = require('html-webpack-plugin')
const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;)

module.exports = {
  entry: './src/index.js', 
  output: {
    filename: '[name].[chunkhash].bundle.js',
    path: path.resolve(__dirname, 'dist') 
  },
  module: {
    rules: [{
        test: /\.m?js$/,
        exclude: /node_modules/,
        use: {
          loader: 'babel-loader', 
        }
      },
      {
        test: /\.s[ac]ss$/, 
        use: [MiniCssExtractPlugin.loader, 'css-loader', 'sass-loader']
      },
      {
        test: /\.(png|svg|jpg|gif|webp|jfif)$/,
        use: [{
          loader: 'url-loader',
          options: {
            limit: 1024 * 100,
            name: 'assets/[name]_[hash:10].[ext]'
          }
        }]
      }
    ]
  },
  plugins: [
    new CleanWebpackPlugin({ // æ¯æ¬¡æ‰“åŒ…å‰åˆ é™¤distæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶
      cleanOnceBeforeBuildPatterns: ['**/*', '!favicon.ico', '!lib/**'], // distæ–‡ä»¶å¤¹ä¸‹çš„favicon.icoæ–‡ä»¶å’Œlibæ–‡ä»¶å¤¹ä¸‹çš„ä¸œè¥¿éƒ½å¿½ç•¥ä¸è¿›è¡Œåˆ é™¤
    }),
    new HtmlWebpackPlugin({
      template: 'index.html', 
      favicon: 'favicon.ico', 
      inject: 'head' 
    }),
    new MiniCssExtractPlugin({
      filename: '[name]-[contenthash].css'
    }),
  ],
};
</code></pre>

<p>ç„¶åé…ç½®webpack.config.dev.jsï¼Œå¼€å‘ç¯å¢ƒä¸»è¦é…ç½®ä»£ç†æœåŠ¡å™¨ï¼Œä»£ç çƒ­æ›´æ–°ï¼Œä»¥åŠä½¿ç”¨æœ€æ–°çš„ç¼“å­˜ç‰¹æ€§</p>

<pre><code class="language-javascript">const { merge } = require('webpack-merge')
const path = require('path')
const baseConfig = require('./webpack.base.js')
const ReactRefreshPlugin = require('@pmmmwh/react-refresh-webpack-plugin')
const webpack = require('webpack')

module.exports = merge(baseConfig, {
  mode: 'development',
  devtool: 'eval-cheap-module-source-map',
  devServer: { 
    contentBase: path.resolve(__dirname, 'dist'),
    port: '8090',
    proxy: { 
      '/api': {
        target: 'http://127.0.0.1:3001',
        pathRewrite: {
          '^/api': '
        }
      },
    },
    hot: true,
    open: true,
  },
  // çƒ­æ›´æ–°
  plugins: [
    new ReactRefreshPlugin({
      overlay: false,
    }),
    new webpack.HotModuleReplacementPlugin()
  ],
  // ç¼“å­˜
  cache: {
    type: 'filesystem',
    buildDependencies: {
      config: [__filename],
    },
  },
})
</code></pre>

<p>æœ€åæ˜¯ç”Ÿäº§ç¯å¢ƒçš„é…ç½®ï¼Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®ä¸»è¦æ˜¯å¯¹ä»£ç è¿›è¡Œä¸€ä¸ªå‹ç¼©</p>

<pre><code class="language-javascript">const { merge } = require('webpack-merge') 
const OptimizeCSSAssetsPlugin = require(&quot;optimize-css-assets-webpack-plugin&quot;)
const TerserJSPlugin = require(&quot;terser-webpack-plugin&quot;)
const baseConfig = require('./webpack.base.js')

module.exports = merge(baseConfig, {
  mode: &quot;production&quot;,
  optimization: {
    minimizer: [new OptimizeCSSAssetsPlugin({})],
    minimizer: [new TerserJSPlugin({}), new OptimizeCSSAssetsPlugin({})] 
  }
})
</code></pre>

<p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªwebpack5çš„åŸºæœ¬é…ç½®ï¼Œå¯ä»¥çœ‹åˆ°é™¤äº†å…¶å†…éƒ¨æ›´æ–°çš„ç‰¹æ€§æ„å¤–ï¼Œå…¶å®ƒçš„è¿˜æ˜¯å¯ä»¥ç”¨åŸæ¥çš„loaderå»é…ç½®ï¼Œä¸»è¦ç”¨åˆ°çš„è¿˜æ˜¯å®ƒçš„ç¼“å­˜çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå½“ç„¶å…¶å®ƒçš„ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§å®˜æ–¹æ–‡æ¡£è¿›è¡Œä¸€ä¸ªé…ç½®</p>

<h3 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h3>

<p><a href="https://webpack.docschina.org/" rel="nofollow noreferrer" target="_blank">webpackå®˜æ–¹ç½‘ç«™</a></p>

<p><a href="https://juejin.cn/post/6983985071699001357" rel="nofollow noreferrer" target="_blank">webpackæ–°ç‰¹æ€§</a></p>

    </div>

    

  
    <div class="post-tags">
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> Â· 
                <span><a href="https://xtid.github.io">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://xtid.github.io/2021/%E5%89%8D%E7%AB%AF%E7%9A%84%E6%A8%A1%E5%9D%97%E8%A7%84%E8%8C%83%E7%AE%80%E8%BF%B0%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AAumd-loader%E6%96%B9%E6%B3%95/" class="prev" rel="prev" title="å‰ç«¯çš„æ¨¡å—è§„èŒƒç®€è¿°ä»¥åŠå¦‚ä½•å®ç°ä¸€ä¸ªUMD-Loaderæ–¹æ³•"><i class="iconfont icon-left"></i>&nbsp;å‰ç«¯çš„æ¨¡å—è§„èŒƒç®€è¿°ä»¥åŠå¦‚ä½•å®ç°ä¸€ä¸ªUMD-Loaderæ–¹æ³•</a>
         
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2021</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
