<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  
  
  
  
  <link rel="prev" href="https://xtid.github.io/2020/%E8%BE%93%E5%85%A5%E4%B8%80%E4%B8%AAurl%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%91%88%E7%8E%B0%E7%9A%84%E8%BF%87%E7%A8%8B/" />
  <link rel="next" href="https://xtid.github.io/2020/flutter%E5%90%84%E7%A7%8D%E8%B8%A9%E5%9D%91%E5%BF%83%E5%BE%97/" />
  <link rel="canonical" href="https://xtid.github.io/2020/flutter%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" sizes="32x32" href="/favicon.ico">
  <link rel="icon" sizes="16x16" href="/favicon.ico">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Flutterè‡ªå®šä¹‰ç»„ä»¶ | ğŸ‘¨ğŸ»â€ğŸ’»
       
  </title>
  <meta name="title" content="Flutterè‡ªå®šä¹‰ç»„ä»¶ | ğŸ‘¨ğŸ»â€ğŸ’»">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/xtid.github.io"
    },
    "articleSection" : "posts",
    "name" : "Flutterè‡ªå®šä¹‰ç»„ä»¶",
    "headline" : "Flutterè‡ªå®šä¹‰ç»„ä»¶",
    "description" : "ç®€è¨€ åœ¨ä½¿ç”¨Flutterå¼€å‘appçš„æ—¶å€™ï¼Œæ˜¯ä½¿ç”¨å„ç§å„æ ·çš„Widget ç»„åˆç»˜åˆ¶å‡ºçš„é¡µé¢ï¼Œä¸€äº›æœ€åŸºç¡€çš„å¦‚Containerã€Paddingã€T",
    "inLanguage" : "zh-CN",
    "author" : "",
    "creator" : "",
    "publisher": "",
    "accountablePerson" : "",
    "copyrightHolder" : "",
    "copyrightYear" : "2020",
    "datePublished": "2020-11-28 16:23:05 \x2b0800 CST",
    "dateModified" : "2020-11-28 16:23:05 \x2b0800 CST",
    "url" : "https:\/\/xtid.github.io\/2020\/flutter%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6\/",
    "wordCount" : "2919",
    "keywords" : [  "ğŸ‘¨ğŸ»â€ğŸ’»"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://xtid.github.io">ğŸ‘¨ğŸ»â€ğŸ’»</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/links/" title="">Links</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://xtid.github.io">ğŸ‘¨ğŸ»â€ğŸ’»</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/links/" title="">Links</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Flutterè‡ªå®šä¹‰ç»„ä»¶</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://xtid.github.io" rel="author"></a> with â™¥ 
                <span class="post-time">
                on <time datetime=2020-11-28 itemprop="datePublished">November 28, 2020</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://xtid.github.io/categories/%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8/"> å®é™…åº”ç”¨ </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          

<h3 id="ç®€è¨€">ç®€è¨€</h3>

<p>åœ¨ä½¿ç”¨<code>Flutter</code>å¼€å‘appçš„æ—¶å€™ï¼Œæ˜¯ä½¿ç”¨å„ç§å„æ ·çš„<code>Widget</code> ç»„åˆç»˜åˆ¶å‡ºçš„é¡µé¢ï¼Œä¸€äº›æœ€åŸºç¡€çš„å¦‚<code>Container</code>ã€<code>Padding</code>ã€<code>Text</code> ç­‰ç­‰ï¼Œç”±å®˜æ–¹å°è£…å¥½çš„æ¯”è¾ƒå¤æ‚çš„ç»„ä»¶å¦‚<code>AppBar</code>ã€<code>æ—¥å†é€‰æ‹©å™¨</code>ç­‰ç­‰ã€‚ä»…ä»…ä½¿ç”¨è¿™äº›ç»„ä»¶ä¹Ÿç¡®å®èƒ½å†™å‡ºä¸€äº›appï¼Œä½†æ˜¯å®˜æ–¹å°è£…å¥½çš„æ‹“å±•æ€§æˆ‘è§‰å¾—ä¸å¤ªå¥½ï¼Œæœ‰äº›å±æ€§æ ¹æœ¬æ— æ³•æ”¹å˜ï¼›å¦å¤–ä¸€æ—¦å’Œè®¾è®¡ç¨¿å‡ºå…¥æ¯”è¾ƒå¤§ï¼Œé‚£æ ¹ä¸å°±ç©ä¸äº†äº†ï¼Œæ‰€ä»¥è¿™å°±æ¶‰åŠåˆ°è‡ªå®šä¹‰ç»„ä»¶ã€‚<code>Flutter</code>è‡ªå®šä¹‰ç»„ä»¶çš„æ–¹å¼æˆ‘äº†è§£åˆ°æœ‰ä¸‰ç§ï¼Œä¸€æ˜¯é€šè¿‡ç»„åˆå…¶å®ƒç»„ä»¶æ¥è¾¾åˆ°ä½ æƒ³è¦çš„æ•ˆæœï¼›äºŒæ˜¯è‡ªç»˜ï¼Œè¿™å—ç‰µæ‰¯åˆ°<code>Canvas</code>ï¼›ä¸‰æ˜¯å®ç°<code>RenderObject</code>ã€‚</p>

<h4 id="1-åŸç†åŸºæœ¬ä»‹ç»">1.åŸç†åŸºæœ¬ä»‹ç»</h4>

<p><code>Flutter</code>å¼•æ“ä¼šå°†æˆ‘ä»¬æ‰€å†™ç»„ä»¶ç”Ÿæˆä¸€ä¸ª<code>Widget Tree</code>ï¼Œè€Œå®é™…æ¸²æŸ“å‡ºæ¥çš„ç»“æœåˆæœ‰ä¸€ä¸ª<code>RenderObject Tree</code>ï¼Œ<code>RenderObject</code>æ˜¯ç»§æ‰¿<code>Widget</code>çš„ã€‚åœ¨é¡¹ç›®è¿è¡Œä¸­`<code>Widget Tree</code>æ˜¯ä¸æ–­å˜åŒ–çš„ï¼Œå¦‚æœæ¯æ¬¡å˜åŒ–éƒ½è¦å¯¼è‡´æ•´ä¸ª<code>RenderObject Tree</code>å˜åŒ–ï¼Œè¿™å¯¹æ€§èƒ½æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ¶ˆè€—ï¼Œäºæ˜¯å°±æœ‰äº†ä¸€ä¸ª<code>Element Trre</code>ï¼Œè¿™å°±ç›¸å½“äºä¸€ä¸ªä¸­é—´å±‚ï¼Œç”±<code>Widget</code>â†’<code>Elment</code>â†’<code>RenderObject</code>ã€‚æ¯æ¬¡<code>Widget</code>å˜åŒ–æ—¶ï¼Œä¸<code>Element</code>åšå¯¹æ¯”ï¼Œæ‰¾å‡ºæœ€å°æœ€ä¼˜çš„å˜åŒ–ï¼Œä½œç”¨äº<code>RenderObject</code>ã€‚æˆ‘ä»¬åˆ›å»ºçš„<code>Widget</code>åŸºæœ¬ç»§æ‰¿äº<code>StatelessWidget</code>ã€<code>StatefulWidget</code>ï¼Œä»–ä»¬ä»…è´Ÿè´£å±æ€§ã€ç”Ÿå‘½å‘¨æœŸç­‰çš„ç®¡ç†ï¼Œæœ€ç»ˆä¹Ÿè¿˜æ˜¯ä¼šç»§æ‰¿äº<code>RenderObjectWidget</code></p>

<p><code>RenderObjectWidget</code>ä¸‹é¢åˆæœ‰ä¸‰ä¸ªå­ç±»</p>

<p><code>SngleChildRenderObjectWidget</code>ï¼š<code>RenderObject</code>åªæœ‰ä¸€ä¸ª <code>child</code></p>

<p><code>MultiChildRenderObjectWidget</code>ï¼šå¯ä»¥æœ‰å¤šä¸ª <code>child</code></p>

<p><code>LeafRenderObjectWidget</code> ï¼š<code>RenderObject</code>æ˜¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæ²¡æœ‰<code>child</code></p>

<p>å®˜æ–¹æ‰€æä¾›çš„ç»„ä»¶å¾ˆå¤šéƒ½æ˜¯ç»§æ‰¿<code>singleChildRenderObjectWidget</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸åªèƒ½ä¼ ä¸€ä¸ª<code>child</code>ï¼Œæ‰¾åˆ°<code>singleChildRenderObjectWidget</code>å®šä¹‰</p>

<pre><code class="language-dart">abstract class SingleChildRenderObjectWidget extends RenderObjectWidget {
  const SingleChildRenderObjectWidget({ Key key, this.child }) : super(key: key);
  final Widget child;

  @override
  SingleChildRenderObjectElement createElement() =&gt; SingleChildRenderObjectElement(this);
}
</code></pre>

<p>å¯ä»¥çœ‹åˆ°æ¯æ¬¡åˆ›å»ºä¸€ä¸ª<code>SingleChildRenderObjectWidget</code>å°±ä¼šè°ƒç”¨`<code>CreateElement</code>ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„<code>Elment</code>ï¼Œå½“ç„¶<code>MultiChildRenderObjectWidget</code>ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œè¿™ä¹Ÿå°±è¯´æ˜äº†ä»–ä»¬ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚æ‰€ä»¥æˆ‘ä»¬å®ç°è‡ªå®šä¹‰ç»„ä»¶å¿…é¡»å¾—ç»§æ‰¿<code>SingleChildRenderObjectWidget</code>æˆ–è€…<code>MultiChildRenderObjectWidget</code>æˆ–è€…è°ƒç”¨å®˜æ–¹å®ç°å¥½çš„è‡ªç»˜ç±»ï¼Œè¿™ä¹Ÿæ˜¯<code>Flutter</code>å¼•æ“æ¸²æŸ“çš„åŸºæœ¬ç»“æ„ã€‚</p>

<h4 id="2-ç»„åˆå…¶å®ƒç»„ä»¶">2..ç»„åˆå…¶å®ƒç»„ä»¶</h4>

<p>è¿™ç§æ–¹å¼æ˜¯æœ€åŸºæœ¬æœ€ç®€å•çš„æ–¹å¼ï¼Œè¯´ç™½äº†å°±æ˜¯å°†ä¸€äº›åŸæœ‰çš„ã€å°è£…å¥½çš„ç»„ä»¶åˆå¹¶å†å°è£…ä¸€æ¬¡ã€‚<code>Flutter</code>æœ¬èº«å°±æœ‰å¾ˆå¤šç»„åˆç»„ä»¶ï¼Œæ¯”å¦‚å¸¸ç”¨çš„<code>Container</code>ï¼ŒæŸ¥çœ‹å®ƒçš„æºç å°±çŸ¥é“ï¼Œå®ƒæ˜¯ç”±<code>DecoratedBox</code>ã€<code>ConstrainedBox</code>ã€<code>Transform</code>ã€<code>Padding</code>ã€<code>Align</code>ç­‰ç»„ä»¶ç»„æˆï¼Œå…¶å†…éƒ¨åšäº†å¾ˆå¤šåˆ¤æ–­å¤„ç†ã€‚è¿™é‡Œå®ç°ä¸€ä¸ªè‡ªå®šä¹‰å®½åº¦çš„<code>drawer</code>ç»„ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªç±»<code>SmartDrawer</code>ç»§æ‰¿<code>StatelessWidget</code>ï¼Œå¹¶å®ç°å…¶å…·ä½“æ–¹æ³•</p>

<pre><code class="language-dart">class SmartDrawer extends StatelessWidget {
  final double elevation;
  final Widget child;
  final String semanticLabel;
  final double widthPercent;
  const SmartDrawer({
    Key key,
    this.elevation = 16.0,
    this.child,
    this.semanticLabel,
    this.widthPercent = 0.7,
  }) : 
   assert(widthPercent != null &amp;&amp; widthPercent &lt; 1.0 &amp;&amp; widthPercent&gt; 0.0)
   ,super(key: key);

  @override
  Widget build(BuildContext context) {
    assert(debugCheckHasMaterialLocalizations(context));
    String label = semanticLabel;
    final double _width = MediaQuery.of(context).size.width * widthPercent;
    
    return Semantics(
      scopesRoute: true,
      namesRoute: true,
      explicitChildNodes: true,
      label: label,
      child: ConstrainedBox(
        constraints: BoxConstraints.expand(width: _width),
        child: Material(
          elevation: elevation,
          child: child,
        ),
      ),
    );
  }
}

</code></pre>

<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸Šè¿°ç»„ä»¶å°±æ˜¯å°†<code>ConstrainedBox</code>ä»¥åŠä¼ å…¥çš„<code>child</code>ç»„åˆæˆä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œå…¶ä»–å±æ€§åˆ™æ˜¯æ¥æ§åˆ¶æ ·å¼çš„ã€‚è¿™é‡Œéœ€è¦ç‰¹åˆ«è¯´æ˜çš„ï¼Œæœ€åè¿”å›çš„<code>Semantics</code>ï¼Œå®ƒç»§æ‰¿<code>SingleChildRenderObjectWidget</code>ï¼Œå®ƒä¸Šé¢å®šä¹‰çš„å±æ€§æœ‰ç‚¹å¸¦æœ‰è¯­ä¹‰åŒ–çš„æ„æ€ï¼Œè€Œå®ƒä¸Šé¢å®šä¹‰çš„<code>child</code>å±æ€§åˆ™æ˜¯è¿”å›çš„ç»„ä»¶ï¼Œè¿™æ ·<code>return Semantices{}</code>å®é™…å°±è¡¨ç¤ºè¿”å›äº†å¸¦æœ‰ä¸€äº›è¯­ä¹‰çš„ç»„ä»¶ã€‚</p>

<h4 id="4-è‡ªç»˜ç»„ä»¶">4.è‡ªç»˜ç»„ä»¶</h4>

<p><code>Flutter</code>è·¨å¹³å°çš„å®ç°æ–¹å¼å°±æ˜¯åœ¨ä¸åŒæ“ä½œç³»ç»Ÿçš„ä¸Šå±‚ç»˜åˆ¶ä¸€ä¸ªä¸­é—´çš„UIç³»ç»Ÿï¼Œå¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿçš„<code>API</code>è¿›è¡Œé€‚é…ï¼Œé£æ ¼ç»Ÿä¸€ï¼Œè¿™æ ·å°±èƒ½å®ç°ä¸€ä¸ªè·¨å¹³å°åº”ç”¨äº†ï¼Œè¿™ä¹Ÿæ˜¯å’Œ<code>React Native</code>çš„æœ€å¤§çš„å·®å¼‚ä»¥åŠä¼˜äº<code>React Native</code>çš„åœ°æ–¹ã€‚å½“ä½ æ— æ³•ç”¨ç°æœ‰çš„ç»„ä»¶æ¥æç»˜ä½ æ‰€éœ€è¦UIæ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è‡ªç»˜ç»„ä»¶æ¥å®ç°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè‡ªç»˜çš„éªŒè¯ç ç»„ä»¶ç¤ºä¾‹</p>

<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªåä¸º<code>CodeReview</code>çš„<code>StatefulWidget</code></p>

<pre><code class="language-dart">class CodeReview extends StatefulWidget {

  final String text;
  final callback;

  CodeReview({Key key, this.text, this.callback}) : super(key: key);

  _CodeReviewState createState() =&gt; _CodeReviewState();

}
</code></pre>

<p>ç„¶åå®ç°å…·ä½“ä»£ç </p>

<pre><code class="language-dart">class _CodeReviewState extends State&lt;CodeReview&gt; {
	
  // å­˜æ”¾æ¯ä¸ªéªŒè¯ç å­—ç¬¦ä¸Šçš„æ¨ªçº¿çš„ä½ç½®
  List&lt;Offset&gt; _lineOffsets = &lt;Offset&gt;[];

  // éªŒè¯ç çš„é•¿åº¦ï¼Œç”±å¤–éƒ¨ä¼ å…¥
  int _textLength;
  // éªŒè¯ç å®½åº¦
  double _width;
  // éªŒè¯ç é«˜åº¦
  double _height;

  // ç”ŸæˆéªŒè¯ç ä¸Šçš„æ¨ªçº¿é®æŒ¡ç‰©çš„ä½ç½®
  void _randLines() {
    _lineOffsets.clear();
    for (var i = 0; i &lt; _textLength; i++) {
      double fromX = randomBetween(10, 20).toDouble();
      double fromY = randomBetween(3, 33).toDouble();
      Offset from = Offset(fromX, fromY);
      _lineOffsets.add(from);

      double endX = randomBetween(60, _width.toInt() - 10).toDouble();
      double endY = randomBetween(3, 33).toDouble();
      Offset end = Offset(endX, endY);
      _lineOffsets.add(end);
    }
  }

  @override
  void initState() {
    super.initState();
    _textLength = widget.text.length ?? 4;
    _width = _textLength.toDouble() * 22;
    _height = 36;
    _randLines();
  }

  void _changeCode() {
    setState(() {
      _randLines();
    });
  }
	
  // å¯¹æ¯ä¸ªå­—ç¬¦è¿›è¡Œéšæœºrotateæ“ä½œ
  Container _subString(index) {
    return Container(
      padding: EdgeInsets.only(left: 2, right: 2, top: randomBetween(0, 14).toDouble()),
      child: Transform.rotate(
        angle: pi / randomBetween(3, 30) * randomBetween(0, 1),
        child: Text(widget.text[index], style: TextStyle(fontSize: randomBetween(20, 22).toDouble(), color: Color(0xFF4abdcc))),
      ),
    );
  }
	
 	// æç»˜éªŒè¯ç ä¸Šæ¨ªçº¿é®æŒ¡ç‰©
  Container _backLines() {
    return Container(
      width: _width,
      height: _height,
      child: CustomPaint(
        painter: CodePaint(_lineOffsets, Tool.randomColor()),
        foregroundPainter: CodePaint(_lineOffsets, Tool.randomColor()),
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Container(
      width: _width,
      height: _height,
      color: Colors.grey[200],
      child: Stack(
        alignment: Alignment.center,
        children: &lt;Widget&gt;[
          _backLines(),
          _backLines(),
          GestureDetector(
            behavior: HitTestBehavior.opaque,
            onTap: () {
              _changeCode();
              widget.callback();
            },
            child: Container(
              width: _width,
              height: _height,
              child: Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: List.generate(_textLength, (int index) {
                  return _subString(index);
                }),
              ),
            ),
          ),
        ],
      ),
    );
  }
}
</code></pre>

<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢ç”¨åˆ°äº†<code>CustomPaint</code>ï¼Œè¿™ä¸ªç±»ç»§æ‰¿<code>SingleChildRenderObjectWidget</code>ï¼Œè¿™è®©æˆ‘ä»¬ç›´æ¥èƒ½ä½¿ç”¨<code>Canvas</code>æ¥ç»˜åˆ¶ä½ æ‰€éœ€è¦çš„UI</p>

<pre><code class="language-dart">class CustomPaint extends SingleChildRenderObjectWidget {
  /// Creates a widget that delegates its painting.
  const CustomPaint({
    Key key,
    this.painter,
    this.foregroundPainter,
    this.size = Size.zero,
    this.isComplex = false,
    this.willChange = false,
    Widget child,
  })......
    ......
    ......
</code></pre>

<p>ä¼ å…¥<code>painter</code> ã€<code>foregroundPainter</code>å¯¹åº”ç±»ï¼Œåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæ˜¯åˆ›å»ºä¸€ä¸ªç±»çš„<code>CodePaint</code>ç»§æ‰¿<code>CustomPainer</code>ï¼Œé‡å†™<code>paint</code>æ–¹æ³•ï¼Œç„¶åè®¾ç½®ç”»ç¬”çš„å±æ€§ï¼Œæœ€åè°ƒç”¨å¯¹åº”çš„<code>Canvas</code>apiå³å¯ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯<code>drawPoints</code>ï¼Œè¿˜æœ‰å…¶ä»–çš„ï¼Œå¦‚<code>drawCircle</code>ã€<code>drawLine</code>ç­‰ç­‰ã€‚</p>

<pre><code class="language-dart">class CodePaint extends CustomPainter {
  final List&lt;Offset&gt; lineOffsets;
  final Color ranColor;
  CodePaint(this.lineOffsets, this.ranColor);

  @override
  void paint(Canvas canvas, Size size) {
    // debugPrint(canvas.runtimeType.toString());
    canvas.save();
    Paint _paint = Paint()
      ..color = ranColor // ç”»ç¬”é¢œè‰²
      ..strokeCap = StrokeCap.round // ç”»ç¬”ç¬”è§¦ç±»å‹
      ..isAntiAlias = true // æ˜¯å¦å¯åŠ¨æŠ—é”¯é½¿
      ..blendMode = BlendMode.exclusion // é¢œè‰²æ··åˆæ¨¡å¼
      ..style = PaintingStyle.fill // ç»˜ç”»é£æ ¼ï¼Œé»˜è®¤ä¸ºå¡«å……
      ..colorFilter = ColorFilter.mode(ranColor, BlendMode.exclusion) // é¢œè‰²æ¸²æŸ“æ¨¡å¼ï¼Œä¸€èˆ¬æ˜¯çŸ©é˜µæ•ˆæœæ¥æ”¹å˜çš„,ä½†æ˜¯flutterä¸­åªèƒ½ä½¿ç”¨é¢œè‰²æ··åˆæ¨¡å¼
      ..maskFilter = MaskFilter.blur(BlurStyle.inner, 1.0) // æ¨¡ç³Šé®ç½©æ•ˆæœ
      ..filterQuality = FilterQuality.high // é¢œè‰²æ¸²æŸ“æ¨¡å¼çš„è´¨é‡
      // ..strokeWidth = randomBetween(1, 3).toDouble(); // æš‚æ—¶å›ºå®š
      ..strokeWidth = 1;

    final pointMode = PointMode.lines;
    canvas.drawPoints(pointMode, lineOffsets, _paint);
    canvas.restore();
  }

  @override
  bool shouldRepaint(CustomPainter oldDelegate) {
    return false;
  }
}
</code></pre>

<p>ç»¼ä¸Šï¼Œè‡ªç»˜é€æ¸çš„æ ¸å¿ƒæ˜¯ç»§æ‰¿<code>CustomPaint</code>ï¼Œç„¶åä½¿ç”¨<code>Canvas</code>å®ç°UIçš„ç»˜åˆ¶</p>

<h4 id="5-å®ç°renderobject">5.å®ç°RenderObject</h4>

<p>å®ç°<code>RenderObject</code>å³æ˜¯è‡ªå·±é‡å†™ä¸€æ•´å¥—æ¸²æŸ“æ ‘ï¼Œé¦–å…ˆå¾—ç»§æ‰¿ä¸€ä¸ª<code>RenderObject</code>ï¼Œå®ç°å…¶å†…ç½®ä»¿ä½›ï¼Œè¿˜å¾—ç»§æ‰¿<code>Element</code>ï¼Œå®ç°å…¶å†…ç½®æ–¹æ³•ï¼Œå¤æ‚çš„è‡ªå®šä¹‰ç»„ä»¶æœ€ç»ˆä¹Ÿæ˜¯é€šè¿‡<code>Canvas</code> APIæ¥ç»˜åˆ¶çš„ï¼Œè€Œä¸Šé¢è¯´çš„<code>CustomPaint</code>åªæ˜¯ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…å°è£…çš„ä¸€ä¸ªä»£ç†ç±»ï¼Œå®ƒç›´æ¥ç»§æ‰¿è‡ª<code>SingleChildRenderObjectWidget</code>ï¼Œé€šè¿‡<code>RenderCustomPaint</code>çš„<code>paint</code>æ–¹æ³•å°†<code>Canvas</code>å’Œç”»ç¬”<code>Painter</code>è¿æ¥èµ·æ¥å®ç°è‡ªç»˜ç»„ä»¶ã€‚è¿™ç§æ–¹å¼æ“ä½œèµ·æ¥å®åœ¨æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä¹Ÿæ²¡æ€ä¹ˆç”¨è¿‡ï¼Œæ‰€ä»¥å°±ä¸æä¾›ç¤ºä¾‹å±•ç¤ºäº†ã€‚</p>

    </div>

    

  
    <div class="post-tags">
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> Â· 
                <span><a href="https://xtid.github.io">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://xtid.github.io/2020/%E8%BE%93%E5%85%A5%E4%B8%80%E4%B8%AAurl%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%91%88%E7%8E%B0%E7%9A%84%E8%BF%87%E7%A8%8B/" class="prev" rel="prev" title="è¾“å…¥ä¸€ä¸ªURLåˆ°é¡µé¢å‘ˆç°çš„è¿‡ç¨‹"><i class="iconfont icon-left"></i>&nbsp;è¾“å…¥ä¸€ä¸ªURLåˆ°é¡µé¢å‘ˆç°çš„è¿‡ç¨‹</a>
         
        
        <a href="https://xtid.github.io/2020/flutter%E5%90%84%E7%A7%8D%E8%B8%A9%E5%9D%91%E5%BF%83%E5%BE%97/" class="next" rel="next" title="Flutterå„ç§è¸©å‘å¿ƒå¾—">Flutterå„ç§è¸©å‘å¿ƒå¾—&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2021</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
