<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>计算机字符编码的介绍 - 早起的老年人の博客</title><meta name="Description" content="早起的老年人做的网站"><meta property="og:url" content="https://baskep.com/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E7%9A%84%E4%BB%8B%E7%BB%8D/">
  <meta property="og:site_name" content="早起的老年人の博客">
  <meta property="og:title" content="计算机字符编码的介绍">
  <meta property="og:description" content="1.简介 程序最终都是以二进制的形式存在计算底层，也就是以0、1这样的字符排列组成程序运行的信息。我们知道计算机最小的存储单位叫做bit(位)">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-10-27T23:14:01+08:00">
    <meta property="article:modified_time" content="2021-10-27T23:14:01+08:00">
    <meta property="og:image" content="https://baskep.com/logo.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://baskep.com/logo.png">
  <meta name="twitter:title" content="计算机字符编码的介绍">
  <meta name="twitter:description" content="1.简介 程序最终都是以二进制的形式存在计算底层，也就是以0、1这样的字符排列组成程序运行的信息。我们知道计算机最小的存储单位叫做bit(位)">
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="canonical" href="https://baskep.com/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E7%9A%84%E4%BB%8B%E7%BB%8D/" /><link rel="prev" href="https://baskep.com/storybook--lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BA%8C/" /><link rel="next" href="https://baskep.com/useeffect%E7%9A%84%E4%BD%BF%E7%94%A8/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "计算机字符编码的介绍",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/baskep.com\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E7%9A%84%E4%BB%8B%E7%BB%8D\/"
        },"image": ["https:\/\/baskep.com\/images\/Apple-Devices-Preview.png"],"genre": "posts","wordcount":  3725 ,
        "url": "https:\/\/baskep.com\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E7%9A%84%E4%BB%8B%E7%BB%8D\/","datePublished": "2021-10-27T23:14:01+08:00","dateModified": "2021-10-27T23:14:01+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https:\/\/baskep.com\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "早起的老年人"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="早起的老年人の博客"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"><i class='fa fa-book'></i> 文章 </a><a class="menu-item" href="/categories/"><i class='fa fa-th'></i> 分类 </a><a class="menu-item" href="/about/"><i class='fa fa-info-circle'></i> 关于 </a><a class="menu-item" href="/links/"><i class='fas fa-user-friends'></i> 友链 </a><a class="menu-item" href="https://github.com/baskep" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i> Github </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="早起的老年人の博客"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title=""><i class='fa fa-book'></i>文章</a><a class="menu-item" href="/categories/" title=""><i class='fa fa-th'></i>分类</a><a class="menu-item" href="/about/" title=""><i class='fa fa-info-circle'></i>关于</a><a class="menu-item" href="/links/" title=""><i class='fas fa-user-friends'></i>友链</a><a class="menu-item" href="https://github.com/baskep" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>Github</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">计算机字符编码的介绍</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>早起的老年人</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/"><i class="far fa-folder fa-fw"></i>日常学习</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-10-27">2021-10-27</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 3725 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 8 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1简介">1.简介</a></li>
    <li><a href="#2编码的发展过程">2.编码的发展过程</a>
      <ul>
        <li><a href="#21ascii-编码">2.1.ASCII 编码</a></li>
        <li><a href="#22unicode">2.2.Unicode</a>
          <ul>
            <li><a href="#utf-32">UTF-32</a></li>
            <li><a href="#utf-8">UTF-8</a></li>
            <li><a href="#utf-16">UTF-16</a></li>
          </ul>
        </li>
        <li><a href="#22-base64编码">2.2 Base64编码</a></li>
      </ul>
    </li>
    <li><a href="#3参考链接">3.参考链接</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="1简介">1.简介</h1>
<p>程序最终都是以二进制的形式存在计算底层，也就是以0、1这样的字符排列组成程序运行的信息。我们知道计算机最小的存储单位叫做bit(位)，8bit也就是一个字节(byte)。我们在电脑上的输入又或是编写的程序，最终都会转化成这样的形式去运行，那么转换成二进制就需要一个标准</p>
<h1 id="2编码的发展过程">2.编码的发展过程</h1>
<h2 id="21ascii-编码">2.1.ASCII 编码</h2>
<p>最开始的计算机，只存在于欧美的一些发达国家中，他们的程序中只需要他们所理解的字符、字母以及阿拉伯数学，因此，他们在编码解码的时候只需要考虑这一种情况：如何将这些字符、字母、数字转为计算机所能理解的二进制数。基于这个需求，就出现了ASCII编码</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://i.loli.net/2021/10/17/w4SQqbaCDWZNPOt.jpg"
        data-srcset="https://i.loli.net/2021/10/17/w4SQqbaCDWZNPOt.jpg, https://i.loli.net/2021/10/17/w4SQqbaCDWZNPOt.jpg 1.5x, https://i.loli.net/2021/10/17/w4SQqbaCDWZNPOt.jpg 2x"
        data-sizes="auto"
        alt="https://i.loli.net/2021/10/17/w4SQqbaCDWZNPOt.jpg"
        title="1.jpg" /></p>
<p>可以看到ASCII编码从0开始最多到127，也就是最多表示了128个字符，转化成2进制，也就是1111111，前面补码一位0，也就是01111111，这里最多也就是8位，也就是一个字节，这也就是说明最多英文字符只需要占一个字节就能表示了</p>
<p>题外话：后来ASCII也进行了一个拓展，包含了更多的符号以及拉丁字母，最多可表示256个字符，也就是一个完整的1字节了</p>
<h2 id="22unicode">2.2.Unicode</h2>
<p>Unicode是一个字符集，上面说了ASCII最多只能表示128/256个字符，那后来各国渐渐都有计算机的发展，需要不同的编码方式，计算机也需要识别更多的字符，这个时候，对于编码标准就要进行拓展了。比如果我国就有GB2312、GBK等汉字字符标准，这些标准除了兼容ASCII的128个字符意外，还新加了几万个汉字以及符号。那么在一个互联的时代，各国的字符应该统一起来成为一个标准，需要一个字符集去包含所有的字符，这就是Unicode。Unicode将世界上所有的符号都纳入其中，成功实现了每个数字代表唯一的至少在某种语言中使用的符号，目前，Unicode 字符集中已经收录超过 13 万个字符。https://home.unicode.org/</p>
<p>Unicode字符的编号表示的形式为 U+[XX]XXXX，X 代表一个十六制数字，一般可以有 4-6 位，不足 4 位前补 0 补足 4 位，超过则按是几位就是几位，具体范围是 U+0000~U+10FFFF，U+为Unicode开头，后面的编码则是十六进制表示的编号，U+10FFFF中的10FFFF转为十进制则是1114111，也就是说Unicode最多表示111万个字符，按照目前已经收录的10几万个字符来看，还有很大的空间可以待用</p>
<p>Unicode是字符集，他最终的编码方案有三种分别是 UTF-32、UTF-16 和 UTF-8，这使他与之前的编码模式不同，什么叫编码方案，简单的说就是决定了Unicode字符在计算机里面最终以多少字节去存储的方式。首先还要明确一个概念，定长与变长，定长的意思就是说某个字符固定用几个字节去存储，而变长的意思代表根据实际情况，选择性的用几个字节去存储</p>
<p>我们以<strong>电</strong>字为例：它的编号或者叫码点为U+7535，7535 转为二进制为 1110101 00110101，其中<code>1110101 </code>不够8位，所以前面补位一位0，变成01110101 00110101</p>
<p><a href="https://imgtu.com/i/5afAu6" target="_blank" rel="noopener noreffer"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://z3.ax1x.com/2021/10/18/5afAu6.png"
        data-srcset="https://z3.ax1x.com/2021/10/18/5afAu6.png, https://z3.ax1x.com/2021/10/18/5afAu6.png 1.5x, https://z3.ax1x.com/2021/10/18/5afAu6.png 2x"
        data-sizes="auto"
        alt="https://z3.ax1x.com/2021/10/18/5afAu6.png"
        title="5afAu6.png" /></a></p>
<h3 id="utf-32">UTF-32</h3>
<p>采用定长的编码方式，以四个字节去存储字符，那么上面的二进制不满四个字节，前面就填充为0，所以这个<strong>电</strong>字采用UTF-32编码则为</p>
<blockquote>
<p>00000000 00000000 01110101 00110101</p>
</blockquote>
<h3 id="utf-8">UTF-8</h3>
<p>采用变长的编码方式，它采用1~4个字节去表示一个字符</p>
<p>1.对于只有一个字节的符号，字节的第一位设为<code>0</code>，后面 7 位为这个符号的 Unicode 码。此时，对于英语字母UTF-8 编码和 ASCII 码是相同的</p>
<p>2.对于 <code>n</code> 字节的符号（<code>n &gt; 1</code>），第一个字节的前 <code>n</code> 位都设为 <code>1</code>，第 <code>n + 1</code> 位设为<code>0</code>，后面字节的前两位一律设为 <code>10</code>。剩下的没有提及的二进制位，全部为这个符号的 Unicode 码，如下表所示：</p>
<table>
<thead>
<tr>
<th>Unicode 码点范围（十六进制）</th>
<th>UTF-8 编码方式（二进制）</th>
<th>字节数</th>
</tr>
</thead>
<tbody>
<tr>
<td>0000 0000 ～ 0000 007F</td>
<td>0xxxxxxx</td>
<td>一个字节</td>
</tr>
<tr>
<td>0000 0080 ～ 0000 07FF</td>
<td>110xxxxx 10xxxxxx</td>
<td>二个子节</td>
</tr>
<tr>
<td>0000 0800 ～ 0000 FFFF</td>
<td>1110xxxx 10xxxxxx 10xxxxxx</td>
<td>三个字节</td>
</tr>
<tr>
<td>0001 0000 ～ 0010 FFFF</td>
<td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
<td>四个字节</td>
</tr>
</tbody>
</table>
<p>这里还是以电字为例，它的码点为U+7535，对比上表，发现它在上表的第三行，意思就是需要使用三个字节去编码，它的UTF-8编码方式就是<code>1110xxxx 10xxxxxx 10xxxxxx</code>。现在问题就是这个*****代表什么，其实就是从该字符的最后一个二进制位开始，依次从后向前填入格式中，多出的位补 0。电字的二进制表示为1110101 00110101，那么按照上诉规则依次往前面添加。最终UTF-8的编码二进制表示为</p>
<blockquote>
<p>11100111 10010100 10110101</p>
</blockquote>
<p>这个二进制编码转为16进制编码表示为E794B5，这和unicode官方表也对的上了</p>
<h3 id="utf-16">UTF-16</h3>
<p>属于变长编码, 它采用2~4个字节去表示一个字符，具体表示方法</p>
<table>
<thead>
<tr>
<th>Unicode范围</th>
<th>UTF-16编码方式</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>U+000</code>~<code>U+FFFF</code></td>
<td>2 Byte存储，编码后等于Unicode值</td>
</tr>
<tr>
<td><code>U+10000</code>~<code>U+10FFFF</code></td>
<td>4 Byte存储，现将Unicode值减去（0x10000），得到20bit长的值。再将Unicode分为高10位和低10位。UTF-16编码的高位是2 Byte，高10位Unicode范围为<code>0</code>-<code>0x3FF</code>，将Unicode值加上<code>0XD800</code>，得到高位代理（或称为前导代理，存储高位）；低位也是2 Byte，低十位Unicode范围一样为<code>0</code>~<code>0x3FF</code>，将Unicode值加上<code>0xDC00</code>,得到低位代理（或称为后尾代理，存储低位）</td>
</tr>
</tbody>
</table>
<p>1.第一个例子：电字 U+7535，也就是对比上表，在2个字节范围内，所以编码后的位置75 35，UTF-16编码就用7535表示</p>
<p>2.第二个例子比较特殊一点: U+12345，这是一个符号𒍅。它在上表中处于第二行，它的位置计算步骤为</p>
<p>第一步：16进制12345减去十六进制10000，得到2345，2345的二进制为10001101000101</p>
<p>第二步：将Unicode分为高10位和低10位，低十位从某位往前数，高十位缺0补0，得到低十位11 0100 0101、高十位00 0000 1000</p>
<p>第三步：高十位加上D800，这里需要将00 0000 1000转为十六进制8，加上D800得到D808，同理，低十位的加法得到DF45。于是得到最终结果D8 08 DF 45，它的16进制编码表示就是D808DF45</p>
<h2 id="22-base64编码">2.2 Base64编码</h2>
<p>为什么会有Base64编码呢？因为有些网络传送渠道并不支持所有的字节，例如传统的邮件只支持<strong>可见字符</strong>的传送，像ASCII码的控制字符就不能通过邮件传送。这样用途就受到了很大的限制，比如图片二进制流的每个字节不可能全部是可见字符，所以就传送不了。Base64编码应运而生，Base64就是一种基于64个可打印字符来表示二进制数据的表示方法</p>
<p>下面是Base64索引表，可以看到Base64编码可以用&quot;A-Z、a-z、0-9、+、/&quot; 64个可打印字符来表示所有其它的二进制数据，它的数值表示字符的索引，这个Base64索引表中只有64个字符，也就是用6bit，1个字节内完全可以表示完Base64编码中的字符，同时还多出两位需要补0。同时Base64还有个基本的规定，就是至少用4个字符去表示源字符</p>
<p><a href="https://imgtu.com/i/50G4e0" target="_blank" rel="noopener noreffer"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://z3.ax1x.com/2021/10/20/50G4e0.png"
        data-srcset="https://z3.ax1x.com/2021/10/20/50G4e0.png, https://z3.ax1x.com/2021/10/20/50G4e0.png 1.5x, https://z3.ax1x.com/2021/10/20/50G4e0.png 2x"
        data-sizes="auto"
        alt="https://z3.ax1x.com/2021/10/20/50G4e0.png"
        title="50G4e0.png" /></a></p>
<p>例子1：将文本Man转为Base64编码</p>
<p><a href="https://imgtu.com/i/50J16s" target="_blank" rel="noopener noreffer"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://z3.ax1x.com/2021/10/20/50J16s.png"
        data-srcset="https://z3.ax1x.com/2021/10/20/50J16s.png, https://z3.ax1x.com/2021/10/20/50J16s.png 1.5x, https://z3.ax1x.com/2021/10/20/50J16s.png 2x"
        data-sizes="auto"
        alt="https://z3.ax1x.com/2021/10/20/50J16s.png"
        title="50J16s.png" /></a></p>
<p>第一步：找到M的ASCII编码为77，转为8位的二进制01001101，同样a转为01100001，n转为01101110，排列出来就是</p>
<blockquote>
<p>01001101 01100001 01101110</p>
</blockquote>
<p>第二步：以每6位去划分</p>
<blockquote>
<p>010011 010110 000101 101110</p>
</blockquote>
<p>第三步：将每一段的二进制转为十进制索引</p>
<blockquote>
<p>19 22 5 46</p>
</blockquote>
<p>然后对照上表，找出对应的字符，那么Man这个文本转为Base64编码也就是TWFu</p>
<p>例子2：将文本A、BC转为Base64编码</p>
<p><a href="https://imgtu.com/i/50Jvcj" target="_blank" rel="noopener noreffer"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://z3.ax1x.com/2021/10/20/50Jvcj.png"
        data-srcset="https://z3.ax1x.com/2021/10/20/50Jvcj.png, https://z3.ax1x.com/2021/10/20/50Jvcj.png 1.5x, https://z3.ax1x.com/2021/10/20/50Jvcj.png 2x"
        data-sizes="auto"
        alt="https://z3.ax1x.com/2021/10/20/50Jvcj.png"
        title="50Jvcj.png" /></a></p>
<p>先看字母A</p>
<p>第一步：将A的ASCII索引65转为二进制1000001，同样前面补0变成</p>
<blockquote>
<p>01000001</p>
</blockquote>
<p>第二步：以每6位去划分</p>
<blockquote>
<p>010000 01</p>
</blockquote>
<p>第三步：可以看到01后面就没位数了，这个时候就要用0去补全6位，也就是</p>
<blockquote>
<p>010000 010000</p>
</blockquote>
<p>然后Base64编码的基本规则是以至少以4个字符去表示源字符，那么剩下的两个字符就用=去表示，同时，将已有的二进制位转为十进制Base64索引找出对应的字符，那么最终A转为Base64编码就是QQ==，后面的BC文本也是一个理</p>
<p>需要注意的一点就是：Base64编码用于请求资源或者转发资源时去表示那些不可见字符，有的时候我们在网上留一些个人信息，为了不被SEO，也可以先将我们的手机号、邮箱转为Base64。Base64不是专为ASCII里面的字符去服务的，其他的二进制数据，也可以转为相应的Base64编码，比如前端里面的二进制图片信息去转为Base64编码，这就是它的由来</p>
<p>这里提供一个将ASCII中的字符转为Base64编码的方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">tranverse</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">code</span> <span class="o">=</span> <span class="s1">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">binaryStr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">i</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">binaryStr</span> <span class="o">+=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">9</span> <span class="o">-</span> <span class="nx">temp</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">temp</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">tail</span> <span class="o">=</span> <span class="nx">binaryStr</span><span class="p">.</span><span class="nx">length</span> <span class="o">%</span> <span class="mi">6</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">binaryStr</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">binaryStr</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">tail</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">binaryStr</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">binaryStr</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">tail</span><span class="p">,</span> <span class="nx">binaryStr</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">left</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">6</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">left</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">index</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">temp</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">res</span> <span class="o">+=</span> <span class="nx">code</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">tail</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">right</span> <span class="o">=</span> <span class="nx">right</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">7</span> <span class="o">-</span> <span class="nx">right</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">res</span> <span class="o">+=</span> <span class="nx">code</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">right</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl">    <span class="nx">res</span> <span class="o">+=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">((</span><span class="mi">6</span> <span class="o">-</span> <span class="nx">tail</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>将图片转化为Base64，其原理是通过创建Canvas元素，然后加载图片，将图片画到Context上，然后调用toDataURL方法直接转成Base64编码返回</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">getBase64Image</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">img</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// 如果是第三方图片，一定要确定是否能跨域
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// img.setAttribute(&#39;crossOrigin&#39;, &#39;anonymous&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="nx">img</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">url</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">img</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">img</span><span class="p">.</span><span class="nx">width</span>
</span></span><span class="line"><span class="cl">      <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">img</span><span class="p">.</span><span class="nx">height</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">ctx</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">resolve</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">base64</span><span class="o">:</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">toDataURL</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">img</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">reject</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="3参考链接">3.参考链接</h1>
<p>1.<a href="https://juejin.cn/post/6844904159314116622" target="_blank" rel="noopener noreffer">深入理解字符编码</a></p>
<p>2.<a href="https://home.unicode.org/" target="_blank" rel="noopener noreffer">Unicode字符集</a></p>
<p>3.<a href="https://www.cnblogs.com/luguo3000/p/3940197.html" target="_blank" rel="noopener noreffer">从原理上搞定Base64</a></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2021-10-27</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://baskep.com/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E7%9A%84%E4%BB%8B%E7%BB%8D/" data-title="计算机字符编码的介绍"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://baskep.com/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E7%9A%84%E4%BB%8B%E7%BB%8D/"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://baskep.com/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E7%9A%84%E4%BB%8B%E7%BB%8D/" data-title="计算机字符编码的介绍"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://baskep.com/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E7%9A%84%E4%BB%8B%E7%BB%8D/" data-title="计算机字符编码的介绍"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://baskep.com/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E7%9A%84%E4%BB%8B%E7%BB%8D/" data-title="计算机字符编码的介绍"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/storybook--lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BA%8C/" class="prev" rel="prev" title="StoryBook &#43; Lerna 开发自己的UI组件库(二)"><i class="fas fa-angle-left fa-fw"></i>StoryBook &#43; Lerna 开发自己的UI组件库(二)</a>
            <a href="/useeffect%E7%9A%84%E4%BD%BF%E7%94%A8/" class="next" rel="next" title="useEffect的使用">useEffect的使用<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">早起的老年人</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/typeit/typeit.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10000},"comment":{},"data":{"id-1":"今天就到这里，回去等通知吧","id-2":"今天就到这里，回去等通知吧"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
