<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>StoryBook &#43; Lerna å¼€å‘è‡ªå·±çš„UIç»„ä»¶åº“(äºŒ) - ğŸ‘¨ğŸ»â€ğŸ’»</title><meta name="Description" content="æ—©èµ·çš„å¹´è½»äººåšçš„ç½‘ç«™"><meta property="og:title" content="StoryBook &#43; Lerna å¼€å‘è‡ªå·±çš„UIç»„ä»¶åº“(äºŒ)" />
<meta property="og:description" content="ä¸Šä¸€ç¯‡å·²ç»ä»‹ç»äº†storybooké¡¹ç›®çš„åŸºæœ¬æ­å»ºï¼Œç°åœ¨æˆ‘ä»¬è¦åšçš„æ˜¯å°†è¿™ä¸ªç»„ä»¶åº“å‘å¸ƒï¼Œä»¥åŠä»å…¬å…±ä»“åº“ä¸­æ‹‰å–ç»„ä»¶åº“ä»£ç ã€‚ç»„ä»¶åº“å‘å¸ƒï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xtidcr.com/storybook-lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BA%8C/" />
<meta property="og:image" content="https://xtidcr.com/logo.png"/>
<meta property="article:published_time" content="2021-08-28T14:47:27+08:00" />
<meta property="article:modified_time" content="2021-08-28T14:47:27+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://xtidcr.com/logo.png"/>

<meta name="twitter:title" content="StoryBook &#43; Lerna å¼€å‘è‡ªå·±çš„UIç»„ä»¶åº“(äºŒ)"/>
<meta name="twitter:description" content="ä¸Šä¸€ç¯‡å·²ç»ä»‹ç»äº†storybooké¡¹ç›®çš„åŸºæœ¬æ­å»ºï¼Œç°åœ¨æˆ‘ä»¬è¦åšçš„æ˜¯å°†è¿™ä¸ªç»„ä»¶åº“å‘å¸ƒï¼Œä»¥åŠä»å…¬å…±ä»“åº“ä¸­æ‹‰å–ç»„ä»¶åº“ä»£ç ã€‚ç»„ä»¶åº“å‘å¸ƒï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="canonical" href="https://xtidcr.com/storybook-lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BA%8C/" /><link rel="prev" href="https://xtidcr.com/storybook-lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%B8%80/" /><link rel="next" href="https://xtidcr.com/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BC%96%E7%A0%81%E7%9A%84%E7%AE%80%E4%BB%8B/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "StoryBook + Lerna å¼€å‘è‡ªå·±çš„UIç»„ä»¶åº“(äºŒ)",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/xtidcr.com\/storybook-lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BA%8C\/"
        },"image": ["https:\/\/xtidcr.com\/images\/Apple-Devices-Preview.png"],"genre": "posts","wordcount":  2580 ,
        "url": "https:\/\/xtidcr.com\/storybook-lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BA%8C\/","datePublished": "2021-08-28T14:47:27+08:00","dateModified": "2021-08-28T14:47:27+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https:\/\/xtidcr.com\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "æ—©èµ·çš„è€å¹´äºº"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="ğŸ‘¨ğŸ»â€ğŸ’»"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"><i class='fa fa-book'></i> æ–‡ç«  </a><a class="menu-item" href="/categories/"><i class='fa fa-th'></i> åˆ†ç±» </a><a class="menu-item" href="/about/"><i class='fa fa-info-circle'></i> å…³äº </a><a class="menu-item" href="https://github.com/xtid" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i> Github </a><a class="menu-item" href="/links/"><i class='fas fa-user-friends'></i> å‹é“¾ </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="ğŸ‘¨ğŸ»â€ğŸ’»"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title=""><i class='fa fa-book'></i>æ–‡ç« </a><a class="menu-item" href="/categories/" title=""><i class='fa fa-th'></i>åˆ†ç±»</a><a class="menu-item" href="/about/" title=""><i class='fa fa-info-circle'></i>å…³äº</a><a class="menu-item" href="https://github.com/xtid" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>Github</a><a class="menu-item" href="/links/" title=""><i class='fas fa-user-friends'></i>å‹é“¾</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">StoryBook &#43; Lerna å¼€å‘è‡ªå·±çš„UIç»„ä»¶åº“(äºŒ)</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>æ—©èµ·çš„è€å¹´äºº</a></span>&nbsp;<span class="post-category">æ”¶å½•äº <a href="/categories/%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8/"><i class="far fa-folder fa-fw"></i>å®é™…åº”ç”¨</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-08-28">2021-08-28</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 2580 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 6 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1verdaccioçš„å®‰è£…ä¸é…ç½®">1.verdaccioçš„å®‰è£…ä¸é…ç½®</a>
      <ul>
        <li><a href="#11åŸºæœ¬å®‰è£…">1.1.åŸºæœ¬å®‰è£…</a></li>
        <li><a href="#12è´¦å·çš„æ³¨å†Œ">1.2.è´¦å·çš„æ³¨å†Œ</a></li>
      </ul>
    </li>
    <li><a href="#2lernaçš„ä½¿ç”¨">2.lernaçš„ä½¿ç”¨</a>
      <ul>
        <li><a href="#21lernaçš„åˆå§‹åŒ–ä¸é…ç½®">2.1.lernaçš„åˆå§‹åŒ–ä¸é…ç½®</a></li>
        <li><a href="#22lernaé¡¹ç›®å…³è”gitä»“åº“">2.2.lernaé¡¹ç›®å…³è”gitä»“åº“</a></li>
        <li><a href="#23åŸæœ‰é¡¹ç›®çš„ç›®å½•æ”¹é€ ">2.3.åŸæœ‰é¡¹ç›®çš„ç›®å½•æ”¹é€ </a></li>
        <li><a href="#24ç»„ä»¶åº“çš„æ‰“åŒ…é…ç½®">2.4.ç»„ä»¶åº“çš„æ‰“åŒ…é…ç½®</a></li>
        <li><a href="#25ç»„ä»¶åº“çš„å‘å¸ƒ">2.5.ç»„ä»¶åº“çš„å‘å¸ƒ</a></li>
      </ul>
    </li>
    <li><a href="#3æ€»ç»“">3.æ€»ç»“</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>ä¸Šä¸€ç¯‡å·²ç»ä»‹ç»äº†storybooké¡¹ç›®çš„åŸºæœ¬æ­å»ºï¼Œç°åœ¨æˆ‘ä»¬è¦åšçš„æ˜¯å°†è¿™ä¸ªç»„ä»¶åº“å‘å¸ƒï¼Œä»¥åŠä»å…¬å…±ä»“åº“ä¸­æ‹‰å–ç»„ä»¶åº“ä»£ç ã€‚ç»„ä»¶åº“å‘å¸ƒï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨<code>npm</code>å®˜æ–¹æä¾›çš„å‘å¸ƒæ–¹å¼ï¼Œéœ€è¦ä½ è‡ªå·±æ³¨å†Œè´¦å·ã€å¯†ç ï¼Œå¯¹äºä¼ä¸šç‰ˆå½“ç„¶è¦æ”¶è´¹ã€‚è¿™é‡Œä½¿ç”¨<code>verdaccio</code>å»æ­å»ºnpmç§æœ‰åº“ï¼Œå¹¶ä¸”ä½¿ç”¨<code>lerna</code>å»ç®¡ç†æ‰€æœ‰ç»„ä»¶åº“</p>
<h1 id="1verdaccioçš„å®‰è£…ä¸é…ç½®">1.verdaccioçš„å®‰è£…ä¸é…ç½®</h1>
<h2 id="11åŸºæœ¬å®‰è£…">1.1.åŸºæœ¬å®‰è£…</h2>
<p>é¦–å…ˆ<code>npm install â€“g verdaccio</code>ï¼Œå®‰è£…å¥½åè¾“å…¥<code>verdaccio</code>è¿è¡Œï¼Œverdaccioé»˜è®¤ç›‘å¬<code>4873</code>ç«¯å£ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹é…ç½®ï¼Œè¯·æ‰“å¼€<code>verdaccio/config.yaml</code>ä¿®æ”¹ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶åŒ…å«äº†verdaccioæ‰€æœ‰çš„é…ç½®ã€‚æœåŠ¡è¿è¡Œæ•ˆæœå¦‚ä¸‹</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://i.loli.net/2021/08/28/FVOPUWxdsS7eInN.png"
        data-srcset="https://i.loli.net/2021/08/28/FVOPUWxdsS7eInN.png, https://i.loli.net/2021/08/28/FVOPUWxdsS7eInN.png 1.5x, https://i.loli.net/2021/08/28/FVOPUWxdsS7eInN.png 2x"
        data-sizes="auto"
        alt="https://i.loli.net/2021/08/28/FVOPUWxdsS7eInN.png"
        title="3.png" /></p>
<h2 id="12è´¦å·çš„æ³¨å†Œ">1.2.è´¦å·çš„æ³¨å†Œ</h2>
<p>é¦–å…ˆå°†npmçš„èµ„æºåº“åœ°å€æ‰§è¡Œæœ¬åœ°çš„verdaccio(http://127.0.0.1:4873)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">npm</span> <span class="nx">set</span> <span class="nx">registry</span> <span class="nx">http</span><span class="o">:</span><span class="c1">//127.0.0.1:4873
</span></code></pre></td></tr></table>
</div>
</div><div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>æ³¨æ„<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">è¿™é‡Œå°†å…¨å±€çš„npmä»“åº“è®¾ç½®åˆ°æœ¬åœ°ï¼Œåªä¸ºè°ƒè¯•ä½¿ç”¨ï¼Œä¹‹åè®°å¾—æ”¹å›æ¥</div>
        </div>
    </div>
<p>ç„¶åæ·»åŠ ç”¨æˆ·åã€å¯†ç ã€email</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">npm</span> <span class="nx">adduser</span> <span class="o">-</span><span class="nx">registry</span> <span class="nx">http</span><span class="o">:</span><span class="c1">//127.0.0.1:4873
</span></code></pre></td></tr></table>
</div>
</div><p>æ³¨å†Œå®Œäº†ä¹‹åå¯ä»¥<code>npm who am i</code>çœ‹ä¸‹æ˜¯å¦æ³¨å†ŒæˆåŠŸï¼Œè¿™å°±æ„å‘³ç€åœ¨æˆ‘æœ¬åœ°å°±å¯ä»¥ç”¨è¿™ä¸ªè´¦å·å‘å¸ƒnpmåŒ…äº†</p>
<h1 id="2lernaçš„ä½¿ç”¨">2.lernaçš„ä½¿ç”¨</h1>
<p><a href="https://www.lernajs.cn/" target="_blank" rel="noopener noreffer">lerna</a>æ˜¯ä¸€ä¸ªç®¡ç†å·¥å…·ï¼Œç”¨äºç®¡ç†åŒ…å«å¤šä¸ªè½¯ä»¶åŒ…ï¼ˆpackageï¼‰çš„JavaScripté¡¹ç›®ã€‚é¦–å…ˆè¦æ˜ç™½ä¸€ä¸ªæ¦‚å¿µï¼Œlernaæ˜¯å¯ä»¥ç®¡ç†å¤šä¸ªä»“åº“çš„å·¥å…·ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šç®¡ç†ä½ é¡¹ç›®ä¸­<code>packages</code>ç›®å½•ä¸­æ‰€æœ‰çš„npmä»“åº“ã€‚</p>
<h2 id="21lernaçš„åˆå§‹åŒ–ä¸é…ç½®">2.1.lernaçš„åˆå§‹åŒ–ä¸é…ç½®</h2>
<p>é¦–å…ˆå…¨å±€å®‰è£…lerna</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">global</span> <span class="nx">lerna</span>
</code></pre></td></tr></table>
</div>
</div><p>ç„¶åè¿›å…¥æˆ‘ä»¬çš„é¡¹ç›®ï¼Œæ‰§è¡Œ<code>lerna init</code>ï¼Œå°†å…¶åˆå§‹åŒ–æˆä¸€ä¸ªlernaç®¡ç†çš„<code>git</code>ä»“åº“</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">lerna</span> <span class="nx">init</span>
</code></pre></td></tr></table>
</div>
</div><p>æ­¤æ—¶æˆ‘ä»¬çš„é¡¹ç›®é‡Œé¢ä¼šå¤šå‡ºæ¥ä¸€ä¸ª<code>lerna.json</code>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ç”¨æ¥é…ç½®lernaç®¡ç†çš„ä»“åº“çš„åœ°å€çš„ï¼ŒæŠŠä»–ä¿®æ”¹ä¸‹ï¼Œè®¾ç½®lernaå‘å¸ƒnpmåŒ…çš„æ—¶å€™ï¼Œæ·»åŠ åˆ°æˆ‘ä»¬æœ¬åœ°<code>verdaccio</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="s2">&#34;packages&#34;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&#34;packages/*&#34;</span> <span class="c1">// ç®¡ç†packagesç›®å½•ä¸‹çš„ä»“åº“
</span><span class="c1"></span>  <span class="p">],</span>
  <span class="s2">&#34;npmClient&#34;</span><span class="o">:</span> <span class="s2">&#34;yarn&#34;</span><span class="p">,</span>
  <span class="s2">&#34;useWorkspaces&#34;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&#34;version&#34;</span><span class="o">:</span> <span class="s2">&#34;independent&#34;</span><span class="p">,</span>
  <span class="s2">&#34;command&#34;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&#34;publish&#34;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&#34;ignoreChanges&#34;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&#34;{__tests__,tests}/**/*.{js,jsx,ts,tsx}&#34;</span><span class="p">,</span>
        <span class="s2">&#34;*.mdx&#34;</span><span class="p">,</span>
        <span class="s2">&#34;*.md&#34;</span>
      <span class="p">],</span>
      <span class="s2">&#34;message&#34;</span><span class="o">:</span> <span class="s2">&#34;chore(release): publish [skip ci]&#34;</span><span class="p">,</span>
      <span class="s2">&#34;registry&#34;</span><span class="o">:</span> <span class="s2">&#34;http://127.0.0.1:4873/&#34;</span>
    <span class="p">},</span>
    <span class="s2">&#34;version&#34;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&#34;message&#34;</span><span class="o">:</span> <span class="s2">&#34;chore(release): publish new version [skip ci]&#34;</span><span class="p">,</span>
      <span class="s2">&#34;conventionalCommits&#34;</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&#34;bootstrap&#34;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&#34;npmClientArgs&#34;</span><span class="o">:</span> <span class="p">[</span>
      <span class="s2">&#34;--no-package-lock&#34;</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯¹äº†è¿˜éœ€è¦æ·»åŠ lernaçš„buildçš„å‘½ä»¤ï¼Œåœ¨package.jsonä¸­æ·»åŠ <code>&quot;build&quot;: &quot;lerna run build&quot;</code></p>
<h2 id="22lernaé¡¹ç›®å…³è”gitä»“åº“">2.2.lernaé¡¹ç›®å…³è”gitä»“åº“</h2>
<p>ç°åœ¨æœ¬åœ°çš„storybooké¡¹ç›®éœ€è¦å…³è”ä¸€ä¸ªgitä»“åº“ï¼Œè¿™æ ·çš„è¯ï¼Œåœ¨publishçš„æ—¶å€™ï¼Œlernaä¼šä»è¿™ä¸ªè¿œç¨‹gitä»“åº“å»æ‹‰å–ä»£ç ç„¶åæ¨é€åˆ°<code>http://127.0.0.1:4873/</code>çš„<code>verdaccio</code>ä¸­ã€‚è¿™é‡Œæˆ‘åœ¨githubä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ¨¡æ¿é¡¹ç›®ï¼Œä¸æœ¬åœ°é¡¹ç›®ä½œå…³è”</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">git remote add origin https://github.com/xtid/storybook-template.git
</code></pre></td></tr></table>
</div>
</div><h2 id="23åŸæœ‰é¡¹ç›®çš„ç›®å½•æ”¹é€ ">2.3.åŸæœ‰é¡¹ç›®çš„ç›®å½•æ”¹é€ </h2>
<p>ç°åœ¨å°†é¡¹ç›®æ•´ä½“ç›®å½•è¿›è¡Œæ”¹é€ ï¼Œå°†æ‰€æœ‰çš„ç»„ä»¶åº“ä»£ç æ”¾å…¥<code>packages</code>ç›®å½•ä¸­ï¼Œæ¯ä¸ªç»„ä»¶åº“ç®¡ç†è‡ªå·±çš„ä¾èµ–ï¼Œæœ€å¤–å±‚å®šä¹‰storybookçš„åŸºæœ¬é…ç½®ï¼Œè¿™é‡Œæˆ‘åˆ›å»ºä¸€ä¸ªå«<code>ui-mobile</code>çš„ç»„ä»¶åº“ï¼Œå°†ä¹‹å‰å†™çš„buttonç»„ä»¶ä»¥åŠstorybookçš„mdxæ–‡ä»¶ç§»è¿‡å»ã€‚å› ä¸ºæ˜¯ç»„ä»¶åº“ï¼Œæ‰€ä»¥è¦æœ‰ä¸€ä¸ªindexæ–‡ä»¶å°†æ‰€æœ‰çš„ç»„ä»¶æŠ›å‡ºï¼Œä¿®æ”¹åæ•´ä½“çš„é¡¹ç›®ç›®å½•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">â”œâ”€.DS_Store
â”œâ”€.editorconfig
â”œâ”€.eslintignore
â”œâ”€.eslintrc.js
â”œâ”€.gitignore
â”œâ”€lerna.json
â”œâ”€package-lock.json
â”œâ”€package.json
â”œâ”€yarn.lock
â”œâ”€packages
|    â”œâ”€ui-mobile
|    |     â”œâ”€src
|    |     |  â”œâ”€index.tsx
|    |     |  â”œâ”€global-style
|    |     |  |      â”œâ”€index-mobile.less
|    |     |  |      â”œâ”€index.less
|    |     |  |      â”œâ”€normalize-mobile.less
|    |     |  |      â”œâ”€normalize.less
|    |     |  |      â”œâ”€antd-mobile
|    |     |  |      |      â”œâ”€anim.less
|    |     |  |      |      â”œâ”€component.less
|    |     |  |      |      â”œâ”€index.less
|    |     |  |      |      â”œâ”€mixins.less
|    |     |  |      |      â””theme.less
|    |     |  |      â”œâ”€antd
|    |     |  |      |  â”œâ”€component.less
|    |     |  |      |  â”œâ”€dark.less
|    |     |  |      |  â”œâ”€index.less
|    |     |  |      |  â”œâ”€mixins.less
|    |     |  |      |  â””theme.less
|    |     |  â”œâ”€components
|    |     |  |     â”œâ”€index.tsx
|    |     |  |     â”œâ”€button
|    |     |  |     |   â”œâ”€index.less
|    |     |  |     |   â”œâ”€index.stories.mdx
|    |     |  |     |   â””index.tsx
â”œâ”€.vscode
|    â””settings.json
â”œâ”€.storybook
|     â”œâ”€main.js
|     â””preview.js
</code></pre></td></tr></table>
</div>
</div><h2 id="24ç»„ä»¶åº“çš„æ‰“åŒ…é…ç½®">2.4.ç»„ä»¶åº“çš„æ‰“åŒ…é…ç½®</h2>
<p>ç°åœ¨ç›®å½•å·²ç»æ”¹äº†ï¼Œæ€è€ƒä¸€ä¸‹ï¼Œè¿™ä¸ªç»„ä»¶åº“è¿˜è¦å®šå¤–çš„æ‰“åŒ…ç¼–è¯‘æˆdistï¼Œç„¶åå†å‘å¸ƒï¼Œé‚£è¿™é‡Œä½¿ç”¨çš„å·¥å…·é€‰æ‹©ä¸º<a href="https://github.com/formium/tsdx" target="_blank" rel="noopener noreffer">tsdx</a>ï¼Œtsdxæ˜¯ä¸“é—¨ç®¡ç†ç”¨tså†™çš„npmç»„ä»¶åº“ï¼Œå®ƒç”šè‡³æä¾›äº†react-storybookæ¨¡æ¿ã€‚é‚£å°†åŸæ¥çš„<code>ui-mobile</code>ç›®å½•åˆ é™¤ï¼Œä½¿ç”¨<code>npx tsdx create ui-mobile</code>å»åˆ›å»ºä¸€ä¸ªtsdxé¡¹ç›®ï¼Œè¿™é‡Œé€‰æ‹©reactæ¨¡æ¿å°±è¡Œã€‚ç„¶åå†å°†ä¹‹å‰ç»„ä»¶åº“ä»£ç ç§»è¿‡å»</p>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>æ³¨æ„<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">è¿™é‡Œè¿˜æœ‰ä¸ªé—®é¢˜ï¼šå°†è¿™äº›é¡¹ç›®ç›®å½•è°ƒæ•´ä¹‹åï¼Œè®°å¾—å°†<code>.storybook/main.js</code>ã€<code>.storybook/preview.js</code>ä¸­çš„å…¥å£æ–‡ä»¶ä»¥åŠå¼•å…¥çš„å…¨å±€æ ·å¼ä¿®æ”¹ä¸€ä¸‹</div>
        </div>
    </div>
<h2 id="25ç»„ä»¶åº“çš„å‘å¸ƒ">2.5.ç»„ä»¶åº“çš„å‘å¸ƒ</h2>
<p>è‡³æ­¤ç»„ä»¶åº“å·²ç»åŸºæœ¬æ­å»ºå®Œæˆï¼Œæ¥ä¸‹æ¥è¦åšçš„ï¼š</br>
1.ä½¿ç”¨tsdxæ‰“åŒ…ç¼–è¯‘ç»„ä»¶åº“åˆ°distç›®å½•<code>npm run build</code> </br>
2.å°†ä»£ç æäº¤åˆ°gitä»“åº“ </br>
3.<code>lerna publish</code>å°†ç»„ä»¶åº“æ¨é€åˆ°æœ¬åœ°<code>verdaccio</code>(åœ¨è¿™æ­¥æ‰§è¡Œçš„æ—¶å€™ï¼Œè®°å¾—åœ¨æ ¹ç›®å½•package.jsoné‡Œé¢æ·»åŠ yarnçš„workspaces)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="s2">&#34;workspaces&#34;</span><span class="o">:</span> <span class="p">[</span>
  <span class="s2">&#34;packages/*&#34;</span>
<span class="p">],</span>
</code></pre></td></tr></table>
</div>
</div><p>publish æˆåŠŸçš„æ•ˆæœ</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://i.loli.net/2021/08/28/YrhU1zW9FtJjsip.png"
        data-srcset="https://i.loli.net/2021/08/28/YrhU1zW9FtJjsip.png, https://i.loli.net/2021/08/28/YrhU1zW9FtJjsip.png 1.5x, https://i.loli.net/2021/08/28/YrhU1zW9FtJjsip.png 2x"
        data-sizes="auto"
        alt="https://i.loli.net/2021/08/28/YrhU1zW9FtJjsip.png"
        title="4.png" /></p>
<p>ç„¶åæ‰“å¼€<code>http://127.0.0.1:4873/</code>ï¼Œçœ‹ä¸‹ç»„ä»¶åº“æ˜¯å¦å‘å¸ƒæˆåŠŸ</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://i.loli.net/2021/08/28/ATp49UxwvgC7eF5.png"
        data-srcset="https://i.loli.net/2021/08/28/ATp49UxwvgC7eF5.png, https://i.loli.net/2021/08/28/ATp49UxwvgC7eF5.png 1.5x, https://i.loli.net/2021/08/28/ATp49UxwvgC7eF5.png 2x"
        data-sizes="auto"
        alt="https://i.loli.net/2021/08/28/ATp49UxwvgC7eF5.png"
        title="5.png" /></p>
<p>å¯ä»¥çœ‹åˆ°æˆ‘è¿™é‡Œå·²ç»å‘å¸ƒæˆåŠŸäº†ï¼Œé‚£ä¹ˆåç»­å°±å¯ä»¥<code>npm install ui-mobile</code>å»å®‰è£…è¿™ä¸ªä¾èµ–å¹¶ä¸”ä½¿ç”¨äº†ï¼Œè¿™å°±æ˜¯æ•´ä¸ªæµç¨‹</p>
<h1 id="3æ€»ç»“">3.æ€»ç»“</h1>
<p>è¿™äº›ç¤ºä¾‹éƒ½æ˜¯åœ¨æœ¬åœ°ç¯å¢ƒåšçš„ï¼ŒçœŸæ­£çš„å¼€å‘ç¯å¢ƒåº”è¯¥æ˜¯åœ¨æœåŠ¡å™¨é‡Œå»éƒ¨ç½²è¿™äº›æœåŠ¡ï¼Œå¹¶ä¸”å…¬å¸å†…éƒ¨ä¸€èˆ¬ä¼šç”¨gitlabå»åšé¡¹ç›®çš„ç®¡ç†ã€‚<code>storybook + lerna</code>çš„ç¡®æ˜¯ä¸€ä¸ªå¥½çš„ç®¡ç†ç»„ä»¶åº“çš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥å‚è€ƒä¸‹æˆ‘çš„æ¨¡æ¿<code>https://github.com/xtid/storybook-template</code></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2021-08-28</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://xtidcr.com/storybook-lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BA%8C/" data-title="StoryBook &#43; Lerna å¼€å‘è‡ªå·±çš„UIç»„ä»¶åº“(äºŒ)"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="https://xtidcr.com/storybook-lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BA%8C/"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Hacker News" data-sharer="hackernews" data-url="https://xtidcr.com/storybook-lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BA%8C/" data-title="StoryBook &#43; Lerna å¼€å‘è‡ªå·±çš„UIç»„ä»¶åº“(äºŒ)"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="https://xtidcr.com/storybook-lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BA%8C/" data-title="StoryBook &#43; Lerna å¼€å‘è‡ªå·±çš„UIç»„ä»¶åº“(äºŒ)"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://xtidcr.com/storybook-lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BA%8C/" data-title="StoryBook &#43; Lerna å¼€å‘è‡ªå·±çš„UIç»„ä»¶åº“(äºŒ)"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/storybook-lerna-%E5%BC%80%E5%8F%91%E8%87%AA%E5%B7%B1%E7%9A%84ui%E7%BB%84%E4%BB%B6%E5%BA%93%E4%B8%80/" class="prev" rel="prev" title="StoryBook &#43; Lerna å¼€å‘è‡ªå·±çš„UIç»„ä»¶åº“(ä¸€)"><i class="fas fa-angle-left fa-fw"></i>StoryBook &#43; Lerna å¼€å‘è‡ªå·±çš„UIç»„ä»¶åº“(ä¸€)</a>
            <a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BC%96%E7%A0%81%E7%9A%84%E7%AE%80%E4%BB%8B/" class="next" rel="next" title="è®¡ç®—æœºç¼–ç çš„ç®€ä»‹">è®¡ç®—æœºç¼–ç çš„ç®€ä»‹<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">æ—©èµ·çš„è€å¹´äºº</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/typeit/typeit.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":10000},"comment":{},"data":{"id-1":"ä¸‰å—ç»™ä½ ä¹°éº»å‰","id-2":"ä¸‰å—ç»™ä½ ä¹°éº»å‰"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
